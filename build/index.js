(()=>{"use strict";const e=window.React,t=window.ReactDOM,n=window.wp.i18n,r=(window.wp.blocks,window.wp.data),{useEffect:l,useState:o}=React,{CheckboxControl:c,ExternalLink:a,Flex:i,FlexItem:s,TextControl:d}=wp.components;function k(){const[t,k]=o([]),u=(0,r.useSelect)((e=>e("core/block-editor").getBlocks()));l((()=>{b()}),[]);const b=()=>{const e=u?u.flatMap((e=>{const t=e.clientId,n=e.originalContent||"",r=(new DOMParser).parseFromString(n,"text/html");return Array.from(r.querySelectorAll("a")).map(((e,n)=>({id:`${t}/${n}`,href:e.href,innerText:e.innerText,blockId:t,targetBlank:e.attributes.target?e.attributes.target.value:""})))})):[];k(e)},h=(e,n)=>{const r=[...t],l=r.find((t=>t.id===e));console.log(n),l&&(n.href&&(l.href=n.href),void 0!==n.blank&&(l.targetBlank=n.blank?"_blank":void 0),console.log(r),k(r),m(l))},m=e=>{const t=(0,r.select)("core/block-editor").getBlock(e.blockId);if(console.log(e),t){const n=t.attributes.content||"",l=(new DOMParser).parseFromString(n,"text/html");l.querySelectorAll("a").forEach(((t,n)=>{n===parseInt(e.id.split("/")[1])&&(t.setAttribute("href",e.href),t.setAttribute("target",e.targetBlank))}));const o=l.body.innerHTML;(0,r.dispatch)("core/block-editor").updateBlockAttributes(e.blockId,{content:o}),(0,r.dispatch)("core/block-editor").flashBlock(e.blockId)}};return(0,e.createElement)("div",null,(0,e.createElement)("h3",null,(0,n.__)("Outbound Links","simple-link-checker")),t.map((t=>(0,e.createElement)("div",{key:t.id},(0,e.createElement)(a,{href:t.href},t.innerText),(0,e.createElement)(i,{gap:"3",justify:"flex-start"},(0,e.createElement)(s,null,(0,e.createElement)(d,{value:t.href,onChange:e=>h(t.id,{href:e})})),(0,e.createElement)(s,null,(0,e.createElement)(c,{label:(0,n.__)("Target _blank","simple-link-checker"),checked:"_blank"===t.targetBlank,onChange:e=>h(t.id,{blank:e})})))))))}window.addEventListener("load",(function(){(0,t.createRoot)(document.getElementById("simple-link-checker-app")).render((0,e.createElement)(k,null))}),!1)})();